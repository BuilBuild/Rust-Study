<!--
 * @Author: LeiJiulong
 * @Date: 2025-03-23 23:36:03
 * @LastEditors: LeiJiulong && lei15557570906@outlook.com
 * @LastEditTime: 2025-03-23 23:36:06
 * @Description: 
-->
> ğŸ’­ å—¯ï¼Œç”¨æˆ·æä¾›çš„è¿™æ®µRustä»£ç çœ‹èµ·æ¥æœ‰é—®é¢˜ã€‚è®©æˆ‘ä»”ç»†çœ‹çœ‹ã€‚é¦–å…ˆï¼Œç”¨æˆ·æåˆ°ä»£ç æœ‰é—®é¢˜ï¼Œä½†ä¸çŸ¥é“å“ªé‡Œå‡ºé”™äº†ã€‚æˆ‘éœ€è¦é€è¡Œæ£€æŸ¥ã€‚
> é¦–å…ˆï¼Œmainå‡½æ•°é‡Œè°ƒç”¨äº†parse_configï¼Œè¿”å›queryå’Œfilenameã€‚parse_configçš„å‚æ•°æ˜¯argsçš„åˆ‡ç‰‡ã€‚å‡½æ•°è¿”å›çš„æ˜¯ä¸¤ä¸ª&strã€‚é—®é¢˜å¯èƒ½å‡ºç°åœ¨è¿™é‡Œï¼Œå› ä¸ºargsæ˜¯Stringç±»å‹çš„Vecï¼Œå½“parse_configè¿”å›&stræ—¶ï¼Œä»–ä»¬å¼•ç”¨äº†argsä¸­çš„å…ƒç´ ã€‚ä½†Rustéœ€è¦ç¡®ä¿è¿™äº›å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸè¶³å¤Ÿé•¿ã€‚
> çœ‹parse_configå‡½æ•°ï¼Œå®ƒæ¥å—&[String]ä½œä¸ºå‚æ•°ï¼Œç„¶åè¿”å›(&str, &str)ã€‚è¿™é‡Œï¼Œargs[1]å’Œargs[2]æ˜¯Stringç±»å‹ï¼Œä½†å‡½æ•°è¯•å›¾è¿”å›å®ƒä»¬çš„å­—ç¬¦ä¸²åˆ‡ç‰‡ã€‚è¿™é‡Œåº”è¯¥ä¼šæœ‰ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºæ— æ³•ç›´æ¥å°†Stringè½¬æ¢ä¸º&strã€‚æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ä½¿ç”¨args[1].as_str()æ¥è·å–å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œæˆ–è€…ç›´æ¥è¿”å›Stringç±»å‹ï¼Œè€Œä¸æ˜¯å¼•ç”¨ã€‚
> æˆ–è€…ï¼Œå¦ä¸€ä¸ªå¯èƒ½æ€§æ˜¯å‡½æ•°è¿”å›çš„å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸé—®é¢˜ã€‚å› ä¸ºparse_configè¿”å›çš„æ˜¯å¯¹argså…ƒç´ çš„å¼•ç”¨ï¼Œè€Œargsæ˜¯åœ¨mainå‡½æ•°ä¸­æ”¶é›†çš„ï¼Œæ‰€ä»¥å½“parse_configè¿”å›åï¼Œè¿™äº›å¼•ç”¨å¿…é¡»æœ‰æ•ˆã€‚ä½†å¯èƒ½Rustæ— æ³•ç¡®å®šè¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥ä¼šæŠ¥ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é”™è¯¯ã€‚è¿™æ—¶å€™å¯èƒ½éœ€è¦ä¸ºè¿”å›çš„å¼•ç”¨æŒ‡å®šç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œæ¯”å¦‚åœ¨å‡½æ•°å®šä¹‰é‡ŒåŠ ä¸Šç”Ÿå‘½å‘¨æœŸæ³¨è§£ï¼Œç¡®ä¿è¿”å›çš„å¼•ç”¨å’Œè¾“å…¥çš„argsåˆ‡ç‰‡ç”Ÿå‘½å‘¨æœŸç›¸å…³è”ã€‚
> æ¯”å¦‚ï¼Œå‡½æ•°åº”è¯¥å®šä¹‰ä¸ºfn parse_config<'a>(args: &'a [String]) -> (&'a str, &'a str)ï¼Œè¿™æ ·æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨è¿”å›çš„å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸå’Œè¾“å…¥å‚æ•°ä¸€è‡´ã€‚ä¸è¿‡ï¼Œç”¨æˆ·å½“å‰çš„ä»£ç å¹¶æ²¡æœ‰è¿™æ ·åšï¼Œæ‰€ä»¥å¯èƒ½ç¼–è¯‘å™¨ä¼šæŠ¥é”™è¯´æ— æ³•æ¨æ–­ç”Ÿå‘½å‘¨æœŸã€‚
> å¦å¤–ï¼Œå½“ç”¨æˆ·è®¿é—®args[1]å’Œargs[2]æ—¶ï¼Œå¦‚æœå‘½ä»¤è¡Œå‚æ•°ä¸è¶³ï¼Œæ¯”å¦‚æ²¡æœ‰æä¾›è¶³å¤Ÿçš„å‚æ•°ï¼Œä¼šå¯¼è‡´ç´¢å¼•è¶Šç•Œï¼Œä»è€Œå¼•èµ·panicã€‚ä½†ç”¨æˆ·çš„é—®é¢˜å¯èƒ½åœ¨äºç¼–è¯‘é”™è¯¯ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶çš„é—®é¢˜ã€‚æ‰€ä»¥éœ€è¦å…ˆè§£å†³ç¼–è¯‘é”™è¯¯ã€‚
> æµ‹è¯•ä¸€ä¸‹ï¼Œå½“å°è¯•å°†Stringè½¬æ¢ä¸º&stræ—¶æ˜¯å¦éœ€è¦ä½¿ç”¨as_str()ã€‚å…¶å®ï¼Œå½“æœ‰ä¸€ä¸ªStringæ—¶ï¼Œå¯ä»¥é€šè¿‡è§£å¼•ç”¨æ¥å¾—åˆ°strï¼Œæ¯”å¦‚&*args[1]ï¼Œæˆ–è€…æ›´ç®€å•çš„æ˜¯ä½¿ç”¨args[1].as_str()ã€‚ä¸è¿‡ï¼Œåœ¨Rustä¸­ï¼ŒStringå®ç°äº†Deref<Target=str>ï¼Œæ‰€ä»¥&Stringä¼šè‡ªåŠ¨è½¬æ¢ä¸º&strã€‚æ‰€ä»¥å®é™…ä¸Šï¼Œç›´æ¥è¿”å›&args[1]ä½œä¸º&stræ˜¯å¯ä»¥çš„ï¼Œä¸éœ€è¦æ˜¾å¼è½¬æ¢ã€‚è¿™å¯èƒ½ä¸æ˜¯é—®é¢˜æ‰€åœ¨ã€‚
> é‚£ä¹ˆï¼Œä¸»è¦é—®é¢˜åº”è¯¥æ˜¯åœ¨ç”Ÿå‘½å‘¨æœŸä¸Šã€‚å½“å‰parse_configå‡½æ•°è¿”å›çš„&strå¯èƒ½æ²¡æœ‰æ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯¼è‡´ç¼–è¯‘å™¨æ— æ³•ç¡®è®¤å¼•ç”¨çš„æœ‰æ•ˆæ€§ã€‚æ­£ç¡®çš„åšæ³•æ˜¯ç»™å‡½æ•°æ·»åŠ ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œç¡®ä¿è¿”å›çš„å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸è¾“å…¥çš„argsåˆ‡ç‰‡ç›¸å…³è”ã€‚ä¾‹å¦‚ï¼š
> fn parse_config<'a>(args: &'a [String]) -> (&'a str, &'a str) {
>     let query = &args[1];
>     let filename = &args[2];
>     (query, filename)
> }
> æˆ–è€…æ›´ç®€å•çš„æ–¹å¼ï¼Œç›´æ¥è¿”å›Stringè€Œä¸æ˜¯å¼•ç”¨ã€‚å› ä¸ºå¦‚æœè¿”å›Stringï¼Œæ‰€æœ‰æƒä¼šè¢«ä¼ é€’å‡ºå»ï¼Œä¸ä¼šæœ‰ç”Ÿå‘½å‘¨æœŸçš„é—®é¢˜ã€‚è¿™å¯èƒ½æ›´é€‚åˆå½“å‰çš„åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯å¦‚æœç”¨æˆ·ä¸éœ€è¦å¼•ç”¨çš„è¯ã€‚æ¯”å¦‚ï¼š
> fn parse_config(args: &[String]) -> (String, String) {
>     let query = args[1].clone();
>     let filename = args[2].clone();
>     (query, filename)
> }
> è¿™æ ·ï¼Œmainå‡½æ•°ä¸­çš„å˜é‡queryå’Œfilenameå°±ä¼šæ‹¥æœ‰è‡ªå·±çš„Stringï¼Œè€Œä¸æ˜¯å¼•ç”¨ï¼Œè¿™æ ·åœ¨åç»­ä½¿ç”¨filenameè¯»å–æ–‡ä»¶æ—¶ï¼Œä¹Ÿä¸ä¼šå‡ºç°ç”Ÿå‘½å‘¨æœŸçš„é—®é¢˜ã€‚
> åŸæ¥çš„ä»£ç ä¸­ï¼Œparse_configè¿”å›çš„æ˜¯ä¸¤ä¸ª&strï¼Œè€Œmainå‡½æ•°ä¸­çš„filenameå˜é‡æ˜¯&strç±»å‹ã€‚å½“è°ƒç”¨fs::read_to_string(filename)æ—¶ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦ä¸€ä¸ªå®ç°AsRef<Path>çš„ç±»å‹ã€‚&strå®ç°äº†è¿™ä¸ªtraitï¼Œæ‰€ä»¥æ²¡é—®é¢˜ã€‚æ‰€ä»¥è¿™éƒ¨åˆ†å¯èƒ½æ²¡é—®é¢˜ã€‚
> æ‰€ä»¥ï¼Œå›åˆ°é—®é¢˜ï¼Œå¯èƒ½çš„ä¸»è¦é”™è¯¯æ˜¯parse_configå‡½æ•°è¿”å›çš„å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ²¡æœ‰è¢«æ­£ç¡®æ ‡æ³¨ã€‚ç¼–è¯‘å™¨ä¼šæŠ¥é”™è¯´æ— æ³•æ¨æ–­ç”Ÿå‘½å‘¨æœŸï¼Œéœ€è¦æ˜¾å¼æŒ‡å®šã€‚ç”¨æˆ·é‡åˆ°çš„é”™è¯¯å¯èƒ½æ˜¯ç±»ä¼¼â€œmissing lifetime specifierâ€çš„é”™è¯¯ã€‚
> æ€»ç»“ï¼Œç”¨æˆ·éœ€è¦ä¸ºparse_configå‡½æ•°æ·»åŠ ç”Ÿå‘½å‘¨æœŸæ³¨è§£ï¼Œæˆ–è€…å°†è¿”å›ç±»å‹æ”¹ä¸ºStringã€‚å› æ­¤ï¼Œæ­£ç¡®çš„ä¿®æ”¹æ–¹æ³•æ˜¯ä¸ºparse_configçš„å‚æ•°å’Œè¿”å›çš„å¼•ç”¨æŒ‡å®šç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼Œæˆ–è€…ç›´æ¥è¿”å›Stringã€‚
> 

æ‚¨çš„ä»£ç å­˜åœ¨ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼š

1. **ç”Ÿå‘½å‘¨æœŸé—®é¢˜**ï¼š
```rust
fn parse_config(args: &[String]) -> (&str, &str)
```
è¿™é‡Œè¿”å›çš„å­—ç¬¦ä¸²åˆ‡ç‰‡éœ€è¦æ˜ç¡®ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œç¡®ä¿å¼•ç”¨æœ‰æ•ˆæ€§ã€‚åº”æ”¹ä¸ºï¼š
```rust
fn parse_config<'a>(args: &'a [String]) -> (&'a str, &'a str)
```

2. **ç´¢å¼•è¶Šç•Œé£é™©**ï¼š
ç›´æ¥è®¿é—® `args[1]` å’Œ `args[2]` ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼ˆå½“å‚æ•°ä¸è¶³æ—¶ï¼‰ã€‚å»ºè®®æ·»åŠ å‚æ•°æ ¡éªŒã€‚

ä¿®æ­£åçš„ä»£ç ï¼š
```rust
use std::env;
use std::fs;
use std::process;

fn main() {
    let args: Vec<String> = env::args().collect();
    
    let (query, filename) = parse_config(&args).unwrap_or_else(|err| {
        eprintln!("å‚æ•°è§£æé”™è¯¯: {}", err);
        process::exit(1);
    });

    println!("Searching for {}", query);
    println!("In file {}", filename);

    let contents = fs::read_to_string(filename)
        .unwrap_or_else(|err| {
            eprintln!("æ–‡ä»¶è¯»å–é”™è¯¯: {}", err);
            process::exit(1);
        });
    
    println!("With txt:\n{}", contents);
}

fn parse_config<'a>(args: &'a [String]) -> Result<(&'a str, &'a str), &'static str> {
    if args.len() < 3 {
        return Err("éœ€è¦è‡³å°‘ä¸¤ä¸ªå‚æ•°ï¼šæŸ¥è¯¢å­—ç¬¦ä¸²å’Œæ–‡ä»¶å");
    }
    Ok((&args[1], &args[2]))
}
```

æ”¹è¿›è¯´æ˜ï¼š
1. æ·»åŠ äº†é”™è¯¯å¤„ç†ï¼Œä½¿ç”¨ `Result` è¿”å›ç±»å‹
2. å¢åŠ å‚æ•°æ•°é‡æ ¡éªŒï¼Œé¿å…ç´¢å¼•è¶Šç•Œ
3. ä½¿ç”¨æ›´å‹å¥½çš„é”™è¯¯æç¤ºå’Œé€€å‡ºæœºåˆ¶
4. ä¿ç•™äº†ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ `'a` ç¡®ä¿å¼•ç”¨æœ‰æ•ˆæ€§
5. ä½¿ç”¨ `unwrap_or_else` å¤„ç†æ½œåœ¨é”™è¯¯ï¼Œæå‡ç¨‹åºå¥å£®æ€§

å»ºè®®è¿è¡Œæ—¶ä½¿ç”¨ï¼š
```bash
cargo run -- æŸ¥è¯¢å­—ç¬¦ä¸² æ–‡ä»¶å.txt
```